# Desafio: Fundamentos ReactJS

<h2><a id="user-content-rocket-sobre-o-desafio" class="anchor" aria-hidden="true" href="#rocket-sobre-o-desafio"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png">ğŸš€</g-emoji> Sobre o desafio</h2>
<p>Nesse desafio, vocÃª deve continuar desenvolvendo a aplicaÃ§Ã£o de gestÃ£o de transaÃ§Ãµes, a GoFinances. Agora vocÃª irÃ¡ praticar o que vocÃª aprendeu atÃ© agora no React.js junto com TypeScript, utilizando rotas e envio de arquivos por formulÃ¡rio.</p>
<p>Essa serÃ¡ uma aplicaÃ§Ã£o que irÃ¡ se conectar ao seu backend do <a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/tree/master/desafio-database-upload">Desafio 06</a>, e exibir as transaÃ§Ãµes criadas e permitir a importaÃ§Ã£o de um arquivo CSV para gerar novos registros no banco de dados.</p>
<h3><a id="user-content-template-da-aplicaÃ§Ã£o" class="anchor" aria-hidden="true" href="#template-da-aplicaÃ§Ã£o"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Template da aplicaÃ§Ã£o</h3>
<p>Para te ajudar nesse desafio, criamos para vocÃª um modelo que vocÃª deve utilizar como um template do Github.</p>
<p>O template estÃ¡ disponÃ­vel na seguinte url: <strong><a href="https://github.com/Rocketseat/gostack-template-fundamentos-reactjs">Acessar Template</a></strong></p>
<p><strong>Dica</strong>: Caso nÃ£o saiba utilizar repositÃ³rios do Github como template, temos um guia em <strong><a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/tree/master/faq-desafios">nosso FAQ</a>.</strong></p>
<p>Agora navegue atÃ© a pasta criada e abra no Visual Studio Code, lembre-se de executar o comando <code>yarn</code> no seu terminal para instalar todas as dependÃªncias.</p>
<h3><a id="user-content-preparando-o-backend" class="anchor" aria-hidden="true" href="#preparando-o-backend"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Preparando o backend</h3>
<p>Antes de tudo, para que seu frontend se conecte corretamente ao backend, vÃ¡ atÃ© a pasta do seu <code>backend</code> e execute os comandos <code>yarn add cors</code> e depois <code>yarn add @types/cors -D</code>.</p>
<p>Depois disso vÃ¡ atÃ© o seu <code>app.ts</code> ainda no backend, e importe o <code>cors</code> e adicione <code>app.use(cors())</code> antes da linha que contÃ©m <code>app.use(routes)</code>;</p>
<p>AlÃ©m disso, tenha certeza que as informaÃ§Ãµes da categoria, estÃ£o sendo retornadas junto com a transaÃ§Ã£o do seu backend no formato como o seguinte:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>c0512e43-6589-4dc8-bd0c-2a3f71b347aa<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Loan<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>income<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>1500.00<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d93eccc7-64bb-4268-b825-9200103f3a8b<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.620Z<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.620Z<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>category<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d93eccc7-64bb-4268-b825-9200103f3a8b<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Others<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.594Z<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.594Z<span class="pl-pds">"</span></span>
  }
}</pre></div>
<p>Para isso, vocÃª pode utilizar a funcionalidade de eager loading do TypeORM, adicionando o seguinte na sua model de transactions:</p>
<div class="highlight highlight-source-js"><pre>@<span class="pl-v">ManyToOne</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-v">Category</span><span class="pl-kos">,</span> <span class="pl-s1">category</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">category</span><span class="pl-kos">.</span><span class="pl-c1">transaction</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">eager</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
@<span class="pl-v">JoinColumn</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">name</span>: <span class="pl-s">'category_id'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
category: <span class="pl-v">Category</span><span class="pl-kos">;</span></pre></div>
<p>Lembre tambÃ©m de fazer o mesmo na model de Category, mas referenciando a tabela de Transaction.</p>
<div class="highlight highlight-source-js"><pre>@<span class="pl-v">OneToMany</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-v">Transaction</span><span class="pl-kos">,</span> <span class="pl-s1">transaction</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">transaction</span><span class="pl-kos">.</span><span class="pl-c1">category</span><span class="pl-kos">)</span>
transaction: <span class="pl-v">Transaction</span><span class="pl-kos">;</span></pre></div>
<h3><a id="user-content-layout-da-aplicaÃ§Ã£o" class="anchor" aria-hidden="true" href="#layout-da-aplicaÃ§Ã£o"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Layout da aplicaÃ§Ã£o</h3>
<p>Essa aplicaÃ§Ã£o possui um layout que vocÃª pode seguir para conseguir visualizar o seu funcionamento.</p>
<p>O layout pode ser acessado atravÃ©s da pÃ¡gina do Figma, no <a href="https://www.figma.com/file/EgOhyj1Inz14dhWGVhRlhr/GoFinances?node-id=1%3A863" rel="nofollow">seguinte link</a>.</p>
<p>VocÃª precisarÃ¡ uma conta (gratuita) no Figma pra inspecionar o layout e obter detalhes de cores, tamanhos, etc.</p>
<h3><a id="user-content-funcionalidades-da-aplicaÃ§Ã£o" class="anchor" aria-hidden="true" href="#funcionalidades-da-aplicaÃ§Ã£o"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Funcionalidades da aplicaÃ§Ã£o</h3>
<p>Agora que vocÃª jÃ¡ estÃ¡ com o template clonado e pronto para continuar, vocÃª deve verificar os arquivos da pasta <code>src</code> e completar onde nÃ£o possui cÃ³digo, com o cÃ³digo para atingir os objetivos de cada rota.</p>
<ul>
<li><strong><code>Listar as transaÃ§Ãµes da sua API</code></strong>: Sua pÃ¡gina <code>Dashboard</code> deve ser capaz de exibir uma listagem atravÃ©s de uma tabela, com o campo <code>title</code>, <code>value</code>, <code>type</code> e <code>category</code> de todas as transaÃ§Ãµes que estÃ£o cadastradas na sua API.</li>
</ul>
<p><strong>Dica</strong>: VocÃª pode utilizar a funÃ§Ã£o <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat" rel="nofollow">Intl</a> para formatar os valores. Dentro da pasta <code>utils</code> no template vocÃª encontrarÃ¡ um cÃ³digo para te ajudar.</p>
<ul>
<li>
<p><strong><code>Exibir o balance da sua API</code></strong>: Sua pÃ¡gina <code>Dashboard</code>, vocÃª deve exibir o balance que Ã© retornado do seu backend, contendo o total geral, junto ao total de entradas e saÃ­das.</p>
</li>
<li>
<p><strong><code>Importar arquivos CSV</code></strong>: Na sua pÃ¡gina <code>Import</code>, vocÃª deve permitir o envio de um arquivo no formato <code>csv</code> para o seu backend, que irÃ¡ fazer a importaÃ§Ã£o das transaÃ§Ãµes para o seu banco de dados. O arquivo csv deve seguir o seguinte <a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/blob/master/desafio-database-upload/assets/file.csv">modelo</a>.</p>
</li>
</ul>
<p><strong>Dica</strong>: Deixamos disponÃ­vel um componente chamado <code>Upload</code> na pasta <code>components</code> para vocÃª ter jÃ¡ preparado uma opÃ§Ã£o de drag-n-drop para o upload de arquivos. PS: Caso vocÃª esteja no windows e esteja sofrendo com algum erro ao tentar importar CSV, altere o tipo de arquivo dentro do arquivo <code>components/upload/index.ts</code> de <code>text/csv</code> para <code>.csv, application/vnd.ms-excel, text/csv</code>.</p>
<p><strong>Dica 2</strong>: Utilize o <a href="https://developer.mozilla.org/pt-BR/docs/Web/API/FormData/FormData" rel="nofollow">FormData()</a> para conseguir enviar o seu arquivo para o seu backend.</p>
<h3><a id="user-content-especÃ­ficaÃ§Ã£o-dos-testes" class="anchor" aria-hidden="true" href="#especÃ­ficaÃ§Ã£o-dos-testes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>EspecÃ­ficaÃ§Ã£o dos testes</h3>
<p>Em cada teste, tem uma breve descriÃ§Ã£o no que sua aplicaÃ§Ã£o deve cumprir para que o teste passe.</p>
<p>Caso vocÃª tenha dÃºvidas quanto ao que sÃ£o os testes, e como interpretÃ¡-los, dÃ© uma olhada em <strong><a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/tree/master/faq-desafios">nosso FAQ</a>.</strong></p>
<p>Para esse desafio, temos os seguintes testes:</p>
<ul>
<li><strong><code>should be able to list the total balance inside the cards</code></strong>: Para que esse teste passe, sua aplicaÃ§Ã£o deve permitir que seja exibido na sua Dashboard, cards contendo o total de <code>income</code>, <code>outcome</code> e o total da subtraÃ§Ã£o de <code>income - outcome</code> que sÃ£o retornados pelo balance do seu backend.</li>
</ul>
<ul>
<li><strong><code>should be able to list the transactions</code></strong>: Para que esse teste passe, sua aplicaÃ§Ã£o deve permitir que sejam listados dentro de uma tabela, toda as transaÃ§Ãµes que sÃ£o retornadas do seu backend.</li>
</ul>
<p><strong>Dica</strong>: Para a exibiÃ§Ã£o dos valores na listagem de transaÃ§Ãµes, as transaÃ§Ãµes com tipo <code>income</code> devem exibir os valores no formado <code>R$ 5.500,00</code>. TransaÃ§Ãµes do tipo <code>outcome</code> devem exibir os valores no formado <code>- R$ 5.500,00</code>.</p>
<ul>
<li><strong><code>should be able to navigate to the import page</code></strong>: Para que esse teste passe, vocÃª deve permitir a troca de pÃ¡gina atravÃ©s do Header, pelo botÃ£o que contÃ©m o nome <code>Importar</code>.</li>
</ul>
<p><strong>Dica</strong>: Utilize o componente <code>Link</code> que Ã© exportado do <code>react-router-dom</code>, passando a propriedade <code>to</code> que leva para a pÃ¡gina <code>/import</code>.</p>
<ul>
<li><strong><code>should be able to upload a file</code></strong>: Para que esse teste passe, vocÃª deve permitir que um arquivo seja enviado atravÃ©s do componente de drag-n-drop na pÃ¡gina de <code>import</code>, e que seja possÃ­vel exibir o nome do arquivo enviado para o input.</li>
</ul>
<p><strong>Dica</strong>: Deixamos disponÃ­vel um componente chamado <code>FileList</code> na pasta <code>components</code> para ajudar vocÃª a listar os arquivos que enviar pelo componente de <code>Upload</code>, ele deve exibir o tÃ­tulo do arquivo e o tamanho dele.</p>

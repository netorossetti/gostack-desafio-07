# Desafio: Fundamentos ReactJS

<h2><a id="user-content-rocket-sobre-o-desafio" class="anchor" aria-hidden="true" href="#rocket-sobre-o-desafio"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png">üöÄ</g-emoji> Sobre o desafio</h2>
<p>Nesse desafio, voc√™ deve continuar desenvolvendo a aplica√ß√£o de gest√£o de transa√ß√µes, a GoFinances. Agora voc√™ ir√° praticar o que voc√™ aprendeu at√© agora no React.js junto com TypeScript, utilizando rotas e envio de arquivos por formul√°rio.</p>
<p>Essa ser√° uma aplica√ß√£o que ir√° se conectar ao seu backend do <a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/tree/master/desafio-database-upload">Desafio 06</a>, e exibir as transa√ß√µes criadas e permitir a importa√ß√£o de um arquivo CSV para gerar novos registros no banco de dados.</p>
<h3><a id="user-content-template-da-aplica√ß√£o" class="anchor" aria-hidden="true" href="#template-da-aplica√ß√£o"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Template da aplica√ß√£o</h3>
<p>Para te ajudar nesse desafio, criamos para voc√™ um modelo que voc√™ deve utilizar como um template do Github.</p>
<p>O template est√° dispon√≠vel na seguinte url: <strong><a href="https://github.com/Rocketseat/gostack-template-fundamentos-reactjs">Acessar Template</a></strong></p>
<p><strong>Dica</strong>: Caso n√£o saiba utilizar reposit√≥rios do Github como template, temos um guia em <strong><a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/tree/master/faq-desafios">nosso FAQ</a>.</strong></p>
<p>Agora navegue at√© a pasta criada e abra no Visual Studio Code, lembre-se de executar o comando <code>yarn</code> no seu terminal para instalar todas as depend√™ncias.</p>
<h3><a id="user-content-preparando-o-backend" class="anchor" aria-hidden="true" href="#preparando-o-backend"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Preparando o backend</h3>
<p>Antes de tudo, para que seu frontend se conecte corretamente ao backend, v√° at√© a pasta do seu <code>backend</code> e execute os comandos <code>yarn add cors</code> e depois <code>yarn add @types/cors -D</code>.</p>
<p>Depois disso v√° at√© o seu <code>app.ts</code> ainda no backend, e importe o <code>cors</code> e adicione <code>app.use(cors())</code> antes da linha que cont√©m <code>app.use(routes)</code>;</p>
<p>Al√©m disso, tenha certeza que as informa√ß√µes da categoria, est√£o sendo retornadas junto com a transa√ß√£o do seu backend no formato como o seguinte:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>c0512e43-6589-4dc8-bd0c-2a3f71b347aa<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Loan<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>income<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>1500.00<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>category_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d93eccc7-64bb-4268-b825-9200103f3a8b<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.620Z<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.620Z<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>category<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>d93eccc7-64bb-4268-b825-9200103f3a8b<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Others<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.594Z<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2020-04-20T00:00:49.594Z<span class="pl-pds">"</span></span>
  }
}</pre></div>
<p>Para isso, voc√™ pode utilizar a funcionalidade de eager loading do TypeORM, adicionando o seguinte na sua model de transactions:</p>
<div class="highlight highlight-source-js"><pre>@<span class="pl-v">ManyToOne</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-v">Category</span><span class="pl-kos">,</span> <span class="pl-s1">category</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">category</span><span class="pl-kos">.</span><span class="pl-c1">transaction</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">eager</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
@<span class="pl-v">JoinColumn</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">name</span>: <span class="pl-s">'category_id'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
category: <span class="pl-v">Category</span><span class="pl-kos">;</span></pre></div>
<p>Lembre tamb√©m de fazer o mesmo na model de Category, mas referenciando a tabela de Transaction.</p>
<div class="highlight highlight-source-js"><pre>@<span class="pl-v">OneToMany</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-v">Transaction</span><span class="pl-kos">,</span> <span class="pl-s1">transaction</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">transaction</span><span class="pl-kos">.</span><span class="pl-c1">category</span><span class="pl-kos">)</span>
transaction: <span class="pl-v">Transaction</span><span class="pl-kos">;</span></pre></div>
<h3><a id="user-content-layout-da-aplica√ß√£o" class="anchor" aria-hidden="true" href="#layout-da-aplica√ß√£o"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Layout da aplica√ß√£o</h3>
<p>Essa aplica√ß√£o possui um layout que voc√™ pode seguir para conseguir visualizar o seu funcionamento.</p>
<p>O layout pode ser acessado atrav√©s da p√°gina do Figma, no <a href="https://www.figma.com/file/EgOhyj1Inz14dhWGVhRlhr/GoFinances?node-id=1%3A863" rel="nofollow">seguinte link</a>.</p>
<p>Voc√™ precisar√° uma conta (gratuita) no Figma pra inspecionar o layout e obter detalhes de cores, tamanhos, etc.</p>
<h3><a id="user-content-funcionalidades-da-aplica√ß√£o" class="anchor" aria-hidden="true" href="#funcionalidades-da-aplica√ß√£o"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Funcionalidades da aplica√ß√£o</h3>
<p>Agora que voc√™ j√° est√° com o template clonado e pronto para continuar, voc√™ deve verificar os arquivos da pasta <code>src</code> e completar onde n√£o possui c√≥digo, com o c√≥digo para atingir os objetivos de cada rota.</p>
<ul>
<li><strong><code>Listar as transa√ß√µes da sua API</code></strong>: Sua p√°gina <code>Dashboard</code> deve ser capaz de exibir uma listagem atrav√©s de uma tabela, com o campo <code>title</code>, <code>value</code>, <code>type</code> e <code>category</code> de todas as transa√ß√µes que est√£o cadastradas na sua API.</li>
</ul>
<p><strong>Dica</strong>: Voc√™ pode utilizar a fun√ß√£o <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat" rel="nofollow">Intl</a> para formatar os valores. Dentro da pasta <code>utils</code> no template voc√™ encontrar√° um c√≥digo para te ajudar.</p>
<ul>
<li>
<p><strong><code>Exibir o balance da sua API</code></strong>: Sua p√°gina <code>Dashboard</code>, voc√™ deve exibir o balance que √© retornado do seu backend, contendo o total geral, junto ao total de entradas e sa√≠das.</p>
</li>
<li>
<p><strong><code>Importar arquivos CSV</code></strong>: Na sua p√°gina <code>Import</code>, voc√™ deve permitir o envio de um arquivo no formato <code>csv</code> para o seu backend, que ir√° fazer a importa√ß√£o das transa√ß√µes para o seu banco de dados. O arquivo csv deve seguir o seguinte <a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/blob/master/desafio-database-upload/assets/file.csv">modelo</a>.</p>
</li>
</ul>
<p><strong>Dica</strong>: Deixamos dispon√≠vel um componente chamado <code>Upload</code> na pasta <code>components</code> para voc√™ ter j√° preparado uma op√ß√£o de drag-n-drop para o upload de arquivos. PS: Caso voc√™ esteja no windows e esteja sofrendo com algum erro ao tentar importar CSV, altere o tipo de arquivo dentro do arquivo <code>components/upload/index.ts</code> de <code>text/csv</code> para <code>.csv, application/vnd.ms-excel, text/csv</code>.</p>
<p><strong>Dica 2</strong>: Utilize o <a href="https://developer.mozilla.org/pt-BR/docs/Web/API/FormData/FormData" rel="nofollow">FormData()</a> para conseguir enviar o seu arquivo para o seu backend.</p>
<h3><a id="user-content-espec√≠fica√ß√£o-dos-testes" class="anchor" aria-hidden="true" href="#espec√≠fica√ß√£o-dos-testes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Espec√≠fica√ß√£o dos testes</h3>
<p>Em cada teste, tem uma breve descri√ß√£o no que sua aplica√ß√£o deve cumprir para que o teste passe.</p>
<p>Caso voc√™ tenha d√∫vidas quanto ao que s√£o os testes, e como interpret√°-los, d√© uma olhada em <strong><a href="https://github.com/Rocketseat/bootcamp-gostack-desafios/tree/master/faq-desafios">nosso FAQ</a>.</strong></p>
<p>Para esse desafio, temos os seguintes testes:</p>
<ul>
<li><strong><code>should be able to list the total balance inside the cards</code></strong>: Para que esse teste passe, sua aplica√ß√£o deve permitir que seja exibido na sua Dashboard, cards contendo o total de <code>income</code>, <code>outcome</code> e o total da subtra√ß√£o de <code>income - outcome</code> que s√£o retornados pelo balance do seu backend.</li>
</ul>
<ul>
<li><strong><code>should be able to list the transactions</code></strong>: Para que esse teste passe, sua aplica√ß√£o deve permitir que sejam listados dentro de uma tabela, toda as transa√ß√µes que s√£o retornadas do seu backend.</li>
</ul>
<p><strong>Dica</strong>: Para a exibi√ß√£o dos valores na listagem de transa√ß√µes, as transa√ß√µes com tipo <code>income</code> devem exibir os valores no formado <code>R$ 5.500,00</code>. Transa√ß√µes do tipo <code>outcome</code> devem exibir os valores no formado <code>- R$ 5.500,00</code>.</p>
<ul>
<li><strong><code>should be able to navigate to the import page</code></strong>: Para que esse teste passe, voc√™ deve permitir a troca de p√°gina atrav√©s do Header, pelo bot√£o que cont√©m o nome <code>Importar</code>.</li>
</ul>
<p><strong>Dica</strong>: Utilize o componente <code>Link</code> que √© exportado do <code>react-router-dom</code>, passando a propriedade <code>to</code> que leva para a p√°gina <code>/import</code>.</p>
<ul>
<li><strong><code>should be able to upload a file</code></strong>: Para que esse teste passe, voc√™ deve permitir que um arquivo seja enviado atrav√©s do componente de drag-n-drop na p√°gina de <code>import</code>, e que seja poss√≠vel exibir o nome do arquivo enviado para o input.</li>
</ul>
<p><strong>Dica</strong>: Deixamos dispon√≠vel um componente chamado <code>FileList</code> na pasta <code>components</code> para ajudar voc√™ a listar os arquivos que enviar pelo componente de <code>Upload</code>, ele deve exibir o t√≠tulo do arquivo e o tamanho dele.</p>
